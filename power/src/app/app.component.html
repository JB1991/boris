<div class="container-fluid p-0">
    <nav class="navbar navbar-light navbar-expand-lg border-bottom bg-white"
         style="z-index: 1000;">
        <a class="navbar-brand"
           title="Zur Startseite"
           [routerLink]="['/']"
           style="color: #343a40;">
            <img src="./assets/logos/logo.png"
                 class="mr-2 align-top"
                 aria-hidden="true"
                 height="25px"
                 i18n-alt
                 alt="LGLN Logo">
            <strong class="d-none d-md-inline">
                <span i18n>Portal für Wertermittlung</span>
                <span style="color: #c4153a;"
                      i18n>.niedersachsen</span>
            </strong>
            <strong class="d-none d-sm-inline d-md-none">
                <span i18n>POWER</span>
                <span style="color: #c4153a;"
                      i18n>.niedersachsen</span>
            </strong>
            <strong class="d-inline d-sm-none">
                <span i18n>POWER</span>
                <span style="color: #c4153a;"
                      i18n>.NI</span>
            </strong>
        </a>

        <button class="navbar-toggler"
                style="border: none; padding-right: 0;"
                type="button"
                (click)="isCollapsed = !isCollapsed"
                aria-label="Navigation umschalten">
            <span class="navbar-toggler-icon"
                  aria-hidden="true"></span>
        </button>

        <div class="collapse navbar-collapse"
             id="navbarToggler"
             [ngbCollapse]="isCollapsed">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item dropdown"
                    (click)="isCollapsedImmo = true; isCollapsedAcc = true;">
                    <a class="nav-link dropdown-toggle clickable"
                       [routerLink]=""
                       id="navbarBRW"
                       role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       (click)="isCollapsedBRW = !isCollapsedBRW"
                       i18n>Bodenwerte</a>

                    <div class="dropdown-menu dropdown-menu-right"
                         aria-labelledby="navbarBRW"
                         [collapse]="isCollapsedBRW">
                        <a class="dropdown-item"
                           *ngIf="config.modules.includes('bodenrichtwerte')"
                           (click)="isCollapsed = true; isCollapsedBRW = true"
                           [routerLink]="['/bodenrichtwerte']"
                           routerLinkActive="active"
                           i18n>Bodenrichtwerte</a>

                        <a class="dropdown-item"
                           *ngIf="config.modules.includes('bodenrichtwerte-altsystem')"
                           (click)="isCollapsed = true; isCollapsedBRW = true"
                           href="https://www.boris.niedersachsen.de/boris/login"
                           target="_blank"
                           rel="noopener noreferrer nofollow"
                           i18n>Bodenrichtwerte - amtlicher Ausdruck</a>

                        <a class="dropdown-item"
                           *ngIf="config.modules.includes('bodenwertkalkulator')"
                           (click)="isCollapsed = true; isCollapsedBRW = true"
                           [routerLink]="['/bodenwertkalkulator']"
                           routerLinkActive="active"
                           i18n>Bodenwertkalkulator</a>

                        <a class="dropdown-item"
                           *ngIf="config.modules.includes('grundstuecksmarktdaten')"
                           (click)="isCollapsed = true; isCollapsedImmo = true"
                           href="https://www.gag.niedersachsen.de/grundstuecksmarktinformationen/landesgrundstucksmarktinformationen-193837.html"
                           target="_blank"
                           rel="noopener noreferrer nofollow"
                           i18n>Grundstücksmarktdaten</a>
                    </div>
                </li>

                <li class="nav-item dropdown"
                    (click)="isCollapsedBRW = true; isCollapsedAcc = true;">
                    <a class="nav-link dropdown-toggle clickable"
                       [routerLink]=""
                       id="navbarImmo"
                       role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       (click)="isCollapsedImmo = !isCollapsedImmo"
                       i18n>Immobilien</a>

                    <div class="dropdown-menu dropdown-menu-right"
                         aria-labelledby="navbarImmo"
                         [collapse]="isCollapsedImmo">
                        <a class="dropdown-item"
                           *ngIf="config.modules.includes('immobilienpreisindex')"
                           (click)="isCollapsed = true; isCollapsedImmo = true"
                           [routerLink]="['/immobilienpreisindex']"
                           routerLinkActive="active"
                           i18n>Niedersächsischer Immobilienpreisindex - NIPIX</a>

                        <a class="dropdown-item"
                           *ngIf="config.modules.includes('immobilienpreiskalkulator')"
                           (click)="isCollapsed = true; isCollapsedImmo = true"
                           href="https://www.boris.niedersachsen.de/boris/ipk"
                           target="_blank"
                           rel="noopener noreferrer nofollow"
                           i18n>Immobilienpreiskalkulator - IPK</a>

                        <a class="dropdown-item"
                           *ngIf="config.modules.includes('grundstuecksmarktdaten')"
                           (click)="isCollapsed = true; isCollapsedImmo = true"
                           href="https://www.gag.niedersachsen.de/grundstuecksmarktinformationen/landesgrundstucksmarktinformationen-193837.html"
                           target="_blank"
                           rel="noopener noreferrer nofollow"
                           i18n>Grundstücksmarktdaten</a>
                    </div>
                </li>

                <li class="nav-item"
                    *ngIf="config.modules.includes('forms')">
                    <a class="nav-link"
                       (click)="isCollapsed = true"
                       [routerLink]="['/forms']"
                       routerLinkActive="active"
                       i18n>Formulare</a>
                </li>

                <li class="nav-item"
                    *ngIf="config.modules.includes('feedback')">
                    <a class="nav-link"
                       (click)="isCollapsed = true"
                       [routerLink]="['/feedback']"
                       routerLinkActive="active"
                       i18n>Feedback</a>
                </li>

                <li class="nav-item"
                    *ngIf="config.modules.includes('login') && !auth.IsAuthenticated()">
                    <a class="nav-link"
                       (click)="isCollapsed = true"
                       [routerLink]="['/login']"
                       [queryParams]="{redirect: uri.pathname}"
                       routerLinkActive="active"
                       i18n>Login</a>
                </li>

                <li class="nav-item dropdown"
                    (click)="isCollapsedImmo = true; isCollapsedBRW = true;"
                    *ngIf="config.modules.includes('login') && auth.IsAuthenticated() && auth.user.data && auth.user.data.preferred_username">
                    <a class="nav-link dropdown-toggle clickable"
                       [routerLink]=""
                       id="navbarUser"
                       role="button"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       (click)="isCollapsedAcc = !isCollapsedAcc">
                        <svg width="1.3em"
                             height="1.3em"
                             viewBox="0 0 16 16"
                             class="bi bi-file-person"
                             fill="currentColor"
                             xmlns="http://www.w3.org/2000/svg"
                             focusable="false"
                             aria-hidden="true">
                            <path fill-rule="evenodd"
                                  d="M4 1h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H4z" />
                            <path d="M13.784 14c-.497-1.27-1.988-3-5.784-3s-5.287 1.73-5.784 3h11.568z" />
                            <path fill-rule="evenodd"
                                  d="M8 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                        </svg>
                        <span class="sr-only"
                              i18n>Account</span>
                    </a>

                    <div class="dropdown-menu dropdown-menu-right"
                         aria-labelledby="navbarUser"
                         [collapse]="isCollapsedAcc">
                        <a class="dropdown-item"
                           [routerLink]="">{{ auth.user.data.email }}</a>

                        <div class="dropdown-divider"></div>

                        <a class="dropdown-item"
                           *ngIf="config.modules.includes('forms')"
                           (click)="isCollapsed = true; isCollapsedAcc = true"
                           [routerLink]="['/forms/dashboard']"
                           routerLinkActive="active"
                           i18n>Meine Formulare</a>

                        <a class="dropdown-item"
                           (click)="isCollapsed = true; isCollapsedAcc = true"
                           [routerLink]="['/logout']"
                           routerLinkActive="active"
                           i18n>Logout</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <div (mouseenter)="isCollapsed = true; isCollapsedBRW = true; isCollapsedImmo = true; isCollapsedAcc = true;">
        <router-outlet></router-outlet>
    </div>

    <div class="container-fluid">
        <footer class="pt-4 my-md-5 pt-md-5 border-top w-100 m-0 overflow-hidden">
            <div *ngIf="router.url.includes('/forms/fillout/form/') || router.url.includes('/forms/editor/')"
                 class="row justify-content-end">
                <div class="col-md-4 text-right">
                    <p class="text-muted"
                       i18n>* Pflichtfeld</p>
                </div>
            </div>
            <div class="row justify-content-around">
                <div class="col text-center">
                    <h5 id="languages"
                        aria-label="Sprachauswahl"
                        i18n-aria-label
                        i18n>Sprache</h5>
                    <a href="{{ baseurl }}"
                       class="footer-link"
                       rel="noopener"
                       aria-labelledby="languages">Deutsch</a>
                    - <a href="/en{{ baseurl }}"
                       class="footer-link"
                       rel="noopener"
                       aria-labelledby="languages">English</a>
                    <hr>
                    <h5 i18n>Informationen</h5>
                    <ul class="list-unstyled text-small">
                        <li class="m-2">
                            <a href="https://www.lgln.niedersachsen.de/startseite/wir_uber_uns_amp_organisation/impressum/impressum-92629.html"
                               class="footer-link"
                               target="_blank"
                               rel="noopener noreferrer nofollow"
                               i18n>Impressum</a>
                        </li>
                        <li class="m-2">
                            <a href="https://www.lgln.niedersachsen.de/startseite/wir_uber_uns_amp_organisation/datenschutz/datenschutz-im-lgln-138166.html"
                               class="footer-link"
                               target="_blank"
                               rel="noopener noreferrer nofollow"
                               i18n>Datenschutz</a>
                        </li>
                        <li class="m-2">
                            <a href="https://www.lgln.niedersachsen.de/startseite/wir_uber_uns_amp_organisation/allgemeine_geschafts_und_nutzungsbedingungen_agnb/allgemeine-geschafts-und-nutzungsbedingungen-agnb-97401.html"
                               class="footer-link"
                               target="_blank"
                               rel="noopener noreferrer nofollow"
                               i18n>Allgemeine Geschäfts- und Nutzungsbedingungen</a>
                        </li>
                    </ul>
                    <p class="text-muted">
                        <span i18n>Version</span>: {{ appVersion.branch }}/{{ appVersion.version }}
                    </p>
                </div>
            </div>
        </footer>
    </div>
</div>

<!-- alerts component -->
<power-alerts></power-alerts>

<!-- loadingscreen component -->
<power-loadingscreen></power-loadingscreen>
