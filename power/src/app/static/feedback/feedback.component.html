<div class="row m-0 mb-4">
    <div class="col-12 p-0 text-center">
        <h1 class="display-3 m-0"
            i18n>Feedback</h1>

        <p class="lead mb-3"
           i18n="@@feedback_header">Bitte schauen Sie in der Feedbackübersicht, ob Ihr Anliegen uns bereits geschickt
            wurde. Sollte dies nicht der Fall sein nutzen Sie bitte die Kontaktfunktion.</p>
    </div>
</div>

<div class="row m-0 mb-4">
    <section class="col-12 col-lg-6 mb-3">
        <div class="jumbotron m-0">
            <h2 class="display-4">
                <svg width="1em"
                     height="1em"
                     viewBox="0 0 16 16"
                     class="bi bi-info-circle-fill"
                     fill="currentColor"
                     xmlns="http://www.w3.org/2000/svg"
                     role="img"
                     focusable="false"
                     aria-hidden="true">
                    <path fill-rule="evenodd"
                          d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                </svg>
                <span class="ml-2"
                      i18n>Feedback geben</span>
            </h2>

            <p class="lead"
               i18n="@@feedback_steps">Geben Sie bitte eine genaue Beschreibung des Problems oder Ihres Vorschlages an,
                welche Schritte haben zu diesem Problem geführt? Wenn möglich, senden Sie bitte ein Bildschirmfoto und
                die Adresszeile der Seite mit. Wir bitten Sie, bei der Einsendung eines Fehlerberichts darauf zu achten,
                den Inhalt des Fehlerberichts als Text und nicht als Bildschirmfoto in ihre Nachricht aufzunehmen.</p>

            <p class="lead"
               i18n="@@feedback_activation">Mit der Nutzung dieser Funktion erklären Sie sich einverstanden, dass ihre
                Nachricht in der Feedbackübersicht auf dieser Seite veröffentlicht werden darf. Wenn Sie hiermit nicht
                einverstanden sind, so schreiben Sie dies bitte direkt in ihre Nachricht.</p>

            <p class="lead"
               i18n="@@feedback_signature">Wenn Sie eine anonyme Veröffentlichung in der Feedbackübersicht wünschen, so
                denken Sie bitte daran, personenbezogene Informationen (z.B. Telefonnummern) aus ihrer Nachricht inkl.
                der Signatur vor dem Absenden zu entfernen. Ihre Nachricht wird manuell freigeschaltet, bevor Sie auf
                dieser Seite in der Feedbackübersicht angezeigt wird.</p>

            <div class="text-center">
                <a class="btn btn-primary btn-lg"
                   href="mailto:{{ mail }}"
                   rel="noopener noreferrer nofollow"
                   role="button"
                   i18n-title
                   title="Feedback über E-Mail geben">
                    <svg width="1em"
                         height="1em"
                         viewBox="0 0 16 16"
                         class="bi bi-envelope"
                         fill="currentColor"
                         xmlns="http://www.w3.org/2000/svg"
                         role="img"
                         focusable="false"
                         aria-hidden="true">
                        <path fill-rule="evenodd"
                              d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383l-4.758 2.855L15 11.114v-5.73zm-.034 6.878L9.271 8.82 8 9.583 6.728 8.82l-5.694 3.44A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.739zM1 11.114l4.758-2.876L1 5.383v5.73z" />
                    </svg>
                    <span class="ml-2"
                          i18n>Feedback über E-Mail geben</span>
                </a>
            </div>

            <hr class="my-4">

            <p class="text-center"
               i18n-title
               title="Falls sich Ihr E-Mail-Programm nicht öffnet, senden Sie die E-Mail bitte an nachfolgenden E-Mail Adresse."
               i18n>Falls sich Ihr E-Mail-Programm nicht öffnet, senden Sie die E-Mail bitte an:</p>
            <div class="text-center">
                <code class="mr-2">{{ mail }}</code>
                <button type="button"
                        class="btn btn-secondary btn-sm"
                        i18n-title
                        title="Email-Adresse kopieren"
                        (click)="copyEmailToClipboard()">
                    <svg width="1em"
                         height="1em"
                         viewBox="0 0 16 16"
                         class="bi bi-clipboard"
                         fill="currentColor"
                         xmlns="http://www.w3.org/2000/svg"
                         role="img"
                         focusable="false"
                         aria-hidden="true">
                        <path fill-rule="evenodd"
                              d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z" />
                        <path fill-rule="evenodd"
                              d="M9.5 1h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z" />
                    </svg>
                    <span class="sr-only"
                          i18n>Feedback Email-Adresse in Zwischenablage kopieren</span>
                </button>
            </div>
        </div>
    </section>

    <section class="col-12 col-lg-6 mb-3">
        <div class="jumbotron m-0">
            <h2 class="display-4">
                <svg width="1em"
                     height="1em"
                     viewBox="0 0 16 16"
                     class="bi bi-journals"
                     fill="currentColor"
                     xmlns="http://www.w3.org/2000/svg"
                     role="img"
                     focusable="false"
                     aria-hidden="true">
                    <path
                          d="M3 2h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2h1a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1H1a2 2 0 0 1 2-2z" />
                    <path
                          d="M5 0h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2v-1a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1H3a2 2 0 0 1 2-2zM1 6v-.5a.5.5 0 0 1 1 0V6h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V9h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z" />
                </svg>
                <span class="ml-2"
                      i18n>Feedbackübersicht</span>
            </h2>

            <div class="row m-0">
                <div class="col-12 p-0 mb-2">
                    <label class="sr-only"
                           for="search-input"
                           i18n>Suche nach Feedback und Tickets</label>
                    <input type="text"
                           id="search-input"
                           class="form-control d-inline w-75"
                           style="max-width: 500px;"
                           [(ngModel)]="search"
                           (change)="doSearch()"
                           i18n-placeholder
                           placeholder="Suche"
                           aria-controls="feedback-list">

                    <button type="submit"
                            class="btn btn-success ml-1"
                            style="vertical-align: 0;"
                            i18n-title
                            title="Suchen"
                            (click)="doSearch()"
                            aria-controls="feedback-list">
                        <svg width="1em"
                             height="1em"
                             viewBox="0 0 16 16"
                             class="bi bi-search"
                             fill="currentColor"
                             xmlns="http://www.w3.org/2000/svg"
                             role="img"
                             focusable="false"
                             aria-hidden="true">
                            <path fill-rule="evenodd"
                                  d="M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z" />
                            <path fill-rule="evenodd"
                                  d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z" />
                        </svg>
                        <span class="sr-only"
                              i18n>Suche ausführen</span>
                    </button>
                </div>

                <div class="col-12 p-0">
                    <label class="sr-only"
                           for="search-filter"
                           i18n>Suchfilter für Tickets</label>
                    <select class="custom-select w-75"
                            id="search-filter"
                            style="max-width: 250px;"
                            [(ngModel)]="stateFilter"
                            (change)="doSearch()"
                            aria-controls="feedback-list">
                        <option value="all"
                                i18n>Alle Tickets</option>
                        <option value="opened"
                                selected
                                i18n>Offene Tickets</option>
                        <option value="closed"
                                i18n>Geschlossene Tickets</option>
                    </select>
                </div>
            </div>

            <hr class="my-4">

            <div role="region"
                 id="feedback-list"
                 aria-live="polite"
                 i18n-aria-label
                 aria-label="Liste mit bekanntem Feedback">
                <div class="card w-100 mb-2 bg-light"
                     *ngFor="let ticket of rss; let i = index;">
                    <div class="card-body">
                        <h3 class="card-title h5 d-inline">
                            {{ filterTitle(ticket.getElementsByTagName('summary').item(0)?.textContent) }}
                        </h3>
                        &nbsp;
                        <h4 class="card-subtitle h6 mb-2 text-muted d-inline">
                            {{ ticket.getElementsByTagName('updated').item(0)?.textContent | date:'short' }}
                        </h4>
                        <p class="card-text lineb">
                            {{ filterBody(ticket.getElementsByTagName('description').item(0)?.textContent) }}
                        </p>
                    </div>
                </div>

                <h3 class="h5 d-inline"
                    *ngIf="rss.length === 0">
                    <span i18n>Leider konnten wir noch keine Tickets finden. Bei Bedarf können Sie uns gerne
                        kontaktieren.</span>
                </h3>
            </div>
        </div>
    </section>
</div>
