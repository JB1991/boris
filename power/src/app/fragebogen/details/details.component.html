<!-- details page -->
<main class="mainpage p-1 p-lg-3" id="content" tabindex="-1">
	<!-- title -->
	<h4 *ngIf="storage.form">{{ storage.form.title }}</h4>

	<!-- form details -->
	<div class="row m-0 mb-3" *ngIf="storage.form">
		<div class="col-12 col-md-6 pl-0">
			ID: {{ storage.form.id }}
			<br>Tags: {{ storage.form.tags }}
		</div>
		<div class="col-12 col-md-6 pl-0">
			Erstellt: {{ storage.form.created | date:'dd.MM.yyyy HH:mm:ss' }}
		</div>
		<div class="col-12 pl-0 pt-2">
			<button type="button" class="btn btn-primary btn-sm mr-2" title="Formular bearbeiten"
					[routerLink]="['/forms/editor', storage.form.id]">
              <i class="fa fa-edit fa-fw" aria-hidden="true"></i>
              Bearbeiten
			</button>
<!--      TODO: Menu für die Auswahl des Access-Mode (Public, Pin6, Pin6Factor, Pin8...)-->
      <button type="button" class="btn btn-primary btn-sm mr-2" title="Formular veröffentlichen"
              (click)="publishFormPin6()">
        <i class="fa fa-arrow-up fa-fw" aria-hidden="true"></i>
              Veröffentlichen (Pin6)
      </button>
      <button type="button" class="btn btn-danger btn-sm" title="Formular löschen"
					(click)="deleteForm()">
              <i class="fa fa-trash fa-fw" aria-hidden="true"></i>
              Löschen
      </button>
		</div>
	</div>

  <!--      TODO: Hide List if form is not published yet and has a Public-Access-Mode-->

	<!-- tasks list -->
	<div class="card bg-light">
		<div class="card-header h5">
			<i class="fas fa-list fa-fw" aria-hidden="true"></i>
			Antworten
		</div>
		<div class="card-body table-responsive p-0">
			<table class="table table-hover m-0">
				<thead>
					<tr>
            <th scope="col" class="border-top-0">ID</th>
						<th scope="col" class="border-top-0">PIN</th>
						<th scope="col" class="border-top-0">Abgeschlossen</th>
            <th scope="col" class="border-top-0">In Bearbeitung</th>
						<th scope="col" class="border-top-0">Erstellt</th>
						<th scope="col" class="border-top-0 w-50"></th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let task of storage.tasksList; index as i">
            <td>{{ task.id }}</td>
						<td scope="row">
							<a [routerLink]="['/forms/fillout', task.pin]">{{ task.pin }}</a>
						</td>
						<td>{{ task.submitted | date:'dd.MM.yyyy HH:mm' }}</td>
            <td>{{ task.accessed | date:'dd.MM.yyyy HH:mm' }}</td>
						<td>{{ task.created | date:'dd.MM.yyyy HH:mm' }}</td>
						<td>
							<button type="button" class="btn btn-danger btn-sm" id="button-delete" title="Antwort löschen"
									(click)="deleteTask(i)">
							<i class="fa fa-trash fa-fw" aria-hidden="true"></i>
							Löschen
							</button>
						</td>
					</tr>
				</tbody>
			</table>
			<span class="m-3" *ngIf="!storage.tasksList.length">Keine Antworten gefunden</span>
		</div>
		<div class="card-footer">
		<button type="button"
				class="btn btn-success btn-sm mr-2"
				title="Neue PIN erstellen"
				(click)="maketask.open()">
			<i class="fas fa-plus fa-fw" aria-hidden="true"></i>
			Neue PIN erstellen
		</button>
		</div>
	</div>
</main>

<power-formulars-details-maketask #maketask></power-formulars-details-maketask>
