<div bsModal #modalnewform="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <!-- modal head -->
            <div class="modal-header">
                <div class="modal-title h4 pull-left">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-file-earmark-medical align-baseline" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M4 1h5v1H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V6h1v7a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2z"/>
                        <path d="M9 4.5V1l5 5h-3.5A1.5 1.5 0 0 1 9 4.5z"/>
                        <path fill-rule="evenodd" d="M7 4a.5.5 0 0 1 .5.5v.634l.549-.317a.5.5 0 1 1 .5.866L8 6l.549.317a.5.5 0 1 1-.5.866L7.5 6.866V7.5a.5.5 0 0 1-1 0v-.634l-.549.317a.5.5 0 1 1-.5-.866L6 6l-.549-.317a.5.5 0 0 1 .5-.866l.549.317V4.5A.5.5 0 0 1 7 4zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/>
                    </svg>
                    Neues Formular
                </div>

                <!-- modal close button -->
                <button type="button" class="close" title="Schließen" data-dismiss="modal" aria-label="Schließen" (click)="close()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <!-- modal body -->
            <div class="modal-body">
                <!-- generate form -->
                <form #newForm="ngForm" onsubmit="return false;">
                    <!-- title -->
                    <div class="form-group">
                        <label for="formtitle">Formular Titel*</label>
                        <input type="text"
                            class="form-control"
                            [(ngModel)]="title"
                            [class.is-invalid]="!title"
                            id="formtitle"
                            name="formtitle"
                            maxlength="200"
                            placeholder="Mein Formular"
                            required>
                    </div>

                    <!-- service -->
                    <div class="form-group">
                        <label for="formservice">Verknüpfter Dienst</label>
                        <select class="custom-select"
                            [(ngModel)]="service"
                            id="formservice"
                            name="formservice"
                            required disabled>
                            <option value="">Keine Anbindung an andere Dienste</option>
                            <option *ngFor="let serv of storage.serviceList; index as i"
                                value="{{ serv.value }}">
                                {{ serv.name }}
                            </option>
                        </select>
                    </div>

                    <!-- template -->
                    <div class="form-group">
                        <label for="formtemplate">Template</label>
                        <select class="custom-select"
                            [(ngModel)]="template"
                            id="formtemplate"
                            name="formtemplate"
                            required>
                            <option value="">Standard</option>
                            <option *ngFor="let templ of storage.formsList; index as i"
                                value="{{ templ.id }}">
                                {{ templ.title }}
                            </option>
                        </select>
                    </div>

                    <!-- tags -->
                    <div class="form-group">
                        <label for="formtag">Formular mit Tags markieren</label>
                        <input type="text"
                            list="tags"
                            class="form-control"
                            [(ngModel)]="tagInput"
                            (keyup.enter)="addTag()"
                            (change)="addTag()"
                            id="formtag"
                            name="formtag"
                            maxlength="50"
                            placeholder="Tag mit ENTER bestätigen"
                            required>
                        <datalist id="tags">
                            <option *ngFor="let tag of storage.tagList; index as i"
                                    value="{{ tag }}">
                        </datalist>
                        <div>
                            <span class="badge badge-pill badge-primary clickable mr-1"
                                  *ngFor="let tag of tagList; index as i"
                                  (click)="removeTag(i)">
                                {{ tag }}
                            </span>
                        </div>
                    </div>
                </form>
            </div>

            <!-- modal buttons -->
            <div class="modal-footer">
                <button type="button" class="btn btn-success" title="Formular erstellen"
                        (click)="NewForm()">
                    Erstellen
                </button>
            </div>
        </div>
    </div>
</div>
